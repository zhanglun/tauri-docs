(window.webpackJsonp=window.webpackJsonp||[]).push([[288],{365:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return i})),t.d(n,"metadata",(function(){return c})),t.d(n,"toc",(function(){return o})),t.d(n,"default",(function(){return u}));var r=t(3),a=(t(0),t(454));const i={title:"Fn tauri::async_runtime::channel",sidebar_label:"fn.channel",custom_edit_url:null},c={unversionedId:"api/rust/tauri/async_runtime/fn.channel",id:"api/rust/tauri/async_runtime/fn.channel",isDocsHomePage:!1,title:"Fn tauri::async_runtime::channel",description:"`rs",source:"@site/docs/zh-hans/api/rust/tauri/async_runtime/fn.channel.md",sourceDirName:"api/rust/tauri/async_runtime",slug:"/api/rust/tauri/async_runtime/fn.channel",permalink:"/tauri-docs/docs/api/rust/tauri/async_runtime/fn.channel",editUrl:null,version:"current",sidebar_label:"fn.channel",frontMatter:{title:"Fn tauri::async_runtime::channel",sidebar_label:"fn.channel",custom_edit_url:null},sidebar:"docs",previous:{title:"Fn tauri::async_runtime::block_on",permalink:"/tauri-docs/docs/api/rust/tauri/async_runtime/fn.block_on"},next:{title:"Fn tauri::async_runtime::handle",permalink:"/tauri-docs/docs/api/rust/tauri/async_runtime/fn.handle"}},o=[{value:"Panics",id:"panics",children:[]},{value:"Examples",id:"examples",children:[]}],l={toc:o};function u({components:e,...n}){return Object(a.b)("wrapper",Object(r.a)({},l,n,{components:e,mdxType:"MDXLayout"}),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-rs"},"pub fn channel<T>(buffer: usize) -> (Sender<T>, Receiver<T>)\n")),Object(a.b)("p",null,"Expand description"),Object(a.b)("p",null,"Creates a bounded mpsc channel for communicating between asynchronous tasks with backpressure."),Object(a.b)("p",null,"The channel will buffer up to the provided number of messages. Once the buffer is full, attempts to send new messages will wait until a message is received from the channel. The provided buffer capacity must be at least 1."),Object(a.b)("p",null,"All data sent on ",Object(a.b)("inlineCode",{parentName:"p"},"Sender")," will become available on ",Object(a.b)("inlineCode",{parentName:"p"},"Receiver")," in the same order as it was sent."),Object(a.b)("p",null,"The ",Object(a.b)("inlineCode",{parentName:"p"},"Sender")," can be cloned to ",Object(a.b)("inlineCode",{parentName:"p"},"send")," to the same channel from multiple code locations. Only one ",Object(a.b)("inlineCode",{parentName:"p"},"Receiver")," is supported."),Object(a.b)("p",null,"If the ",Object(a.b)("inlineCode",{parentName:"p"},"Receiver")," is disconnected while trying to ",Object(a.b)("inlineCode",{parentName:"p"},"send"),", the ",Object(a.b)("inlineCode",{parentName:"p"},"send")," method will return a ",Object(a.b)("inlineCode",{parentName:"p"},"SendError"),". Similarly, if ",Object(a.b)("inlineCode",{parentName:"p"},"Sender")," is disconnected while trying to ",Object(a.b)("inlineCode",{parentName:"p"},"recv"),", the ",Object(a.b)("inlineCode",{parentName:"p"},"recv")," method will return ",Object(a.b)("inlineCode",{parentName:"p"},"None"),"."),Object(a.b)("h2",{id:"panics"},"Panics"),Object(a.b)("p",null,"Panics if the buffer capacity is 0."),Object(a.b)("h2",{id:"examples"},"Examples"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-rs"},'use tokio::sync::mpsc;\n\n#[tokio::main]\n\nasync fn main() {\n    let (tx, mut rx) = mpsc::channel(100);\n\n    tokio::spawn(async move {\n        for i in 0..10 {\n            if let Err(_) = tx.send(i).await {\n                println!("receiver dropped");\n                return;\n            }\n        }\n    });\n\n    while let Some(i) = rx.recv().await {\n        println!("got = {}", i);\n    }\n}\n')))}u.isMDXComponent=!0},454:function(e,n,t){"use strict";t.d(n,"a",(function(){return p})),t.d(n,"b",(function(){return m}));var r=t(0),a=t.n(r);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var u=a.a.createContext({}),s=function(e){var n=a.a.useContext(u),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},p=function(e){var n=s(e.components);return a.a.createElement(u.Provider,{value:n},e.children)},b={inlineCode:"code",wrapper:function(e){var n=e.children;return a.a.createElement(a.a.Fragment,{},n)}},d=a.a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,c=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),p=s(t),d=r,m=p["".concat(c,".").concat(d)]||p[d]||b[d]||i;return t?a.a.createElement(m,o(o({ref:n},u),{},{components:t})):a.a.createElement(m,o({ref:n},u))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,c=new Array(i);c[0]=d;var o={};for(var l in n)hasOwnProperty.call(n,l)&&(o[l]=n[l]);o.originalType=e,o.mdxType="string"==typeof e?e:r,c[1]=o;for(var u=2;u<i;u++)c[u]=t[u];return a.a.createElement.apply(null,c)}return a.a.createElement.apply(null,t)}d.displayName="MDXCreateElement"}}]);